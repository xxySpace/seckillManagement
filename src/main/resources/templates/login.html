<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link href="../static/h-ui/static/h-ui/css/H-ui.min.css" rel="stylesheet" type="text/css"/>
    <link href="../static/h-ui/static/h-ui.admin/css/H-ui.login.css" rel="stylesheet" type="text/css"/>
    <link href="../static/h-ui/static/h-ui.admin/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="../static/h-ui/lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css"/>


    <!-- jQuery (Bootstrap 的 JavaScript 插件需要引入 jQuery) -->
    <script src="https://code.jquery.com/jquery.js" type="text/javascript"></script>
    <!-- 包括所有已编译的插件 -->

    <title>用户登录</title>
</head>
<body>
<div class="header"></div>
<div class="loginWraper">
    <div id="loginform" class="loginBox">
        <form class="form form-horizontal" action="login.html" method="post">
            <div class="row cl">
                <label class="form-label col-xs-3"><i class="Hui-iconfont">手机号：</i></label>
                <div class="formControls col-xs-8">
                    <input id="telphone" name="telphone" type="text" placeholder="手机号" class="input-text size-L">
                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-3"><i class="Hui-iconfont">密码：</i></label>
                <div class="formControls col-xs-8">
                    <input id="password" name="password" type="password" placeholder="密码" class="input-text size-L"/>
                </div>
            </div>
            <div class="row cl">
                <div class="formControls col-xs-8 col-xs-offset-3">
                    <input class="input-text size-L" type="text" placeholder="验证码" onblur="if(this.value==''){this.value='验证码'}" onclick="if(this.value=='验证码'){this.value='';}" value="验证码" style="width:150px;">
                    <img src=""> <a id="kanbuq" href="javascript:;">看不清，换一张</a> </div>
            </div>
            <div class="row cl">
                <div class="formControls col-xs-8 col-xs-offset-3">
                    <input id="login" name="login" type="submit" class="btn btn-success radius size-L" value=" 登    录 ">
                    <input id="register" name="register" type="reset" class="btn btn-default radius size-L" value=" 注    册 ">
                </div>
            </div>
        </form>
    </div>
</div>
</body>

<script>
    jQuery(document).ready(function(){
        //绑定login的click事件，用于用户登录请求
        $("#login").on("click",function(){
            var telphone = $("#telphone").val();
            var password = $("#password").val();
            if(telphone == null || telphone == ""){
                alert("手机号不能为空");
                return false;
            }
            if(password == null || password == ""){
                alert("密码不能为空");
                return false;
            }
            $.ajax({
                type:"POST",
                contentType:"application/x-www-form-urlencoded",
                url:"http://localhost:8080/user/login",
                data:{
                    "telphone":$("#telphone").val(),
                    "password":password
                },
                success:function(data){
                    if(data.status == "success"){
                        alert("登录成功");
                    }else{
                        alert("用户登录失败，原因为"+ data.data.errMsg);
                    }
                },
                error:function(data){
                    alert("用户登录失败，原因为"+ data.responseText);
                }
            });
            return false;
        });
        $("#register").on("click",function(){
            window.location.href="register.html";
        });
    });




</script>
</html>